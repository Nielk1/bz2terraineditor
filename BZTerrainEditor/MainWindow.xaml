<mah:MetroWindow x:Class="BZTerrainEditor.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:BZTerrainEditor"
        xmlns:nodenetwork="clr-namespace:NodeNetwork.Views;assembly=NodeNetwork"
        xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
        xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
        xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
        xmlns:viewModels="clr-namespace:BZTerrainEditor.ViewModels"
        xmlns:reactiveui="http://reactiveui.net"
        mc:Ignorable="d"
        Title="MainWindow" Height="625" Width="1000" MinHeight="625" MinWidth="1000">
    <DockPanel>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="260" MinWidth="250"/>
                <!-- Left panel width -->
                <ColumnDefinition Width="4"/>
                <!-- Splitter width -->
                <ColumnDefinition Width="*"/>
                <!-- Main content -->
            </Grid.ColumnDefinitions>

            <mah:MetroTabControl TabStripPlacement="Left" Grid.Column="0">
                <mah:MetroTabControl.Resources>
                    <Style TargetType="mah:MetroTabItem">
                        <Setter Property="Foreground" Value="{DynamicResource MahApps.Brushes.SemiTransparent}" />
                        <Style.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Foreground" Value="{DynamicResource MahApps.Brushes.Accent}" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </mah:MetroTabControl.Resources>
                <mah:MetroTabItem ToolTip="Menu">
                    <mah:MetroTabItem.Header>
                        <iconPacks:PackIconLucide Kind="Folder"
                                                  Width="36" Height="36" Padding="2"
                                                  Foreground="{Binding RelativeSource={RelativeSource AncestorType={x:Type mah:MetroTabItem}}, Path=Foreground}" />
                    </mah:MetroTabItem.Header>
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <mah:Tile Title="New Workspace" Width="Auto"
                                      mah:ControlsHelper.MouseOverBorderBrush="{DynamicResource MahApps.Brushes.ThemeForeground}">
                                <iconPacks:PackIconMaterial Kind="FolderPlusOutline" Width="40" Height="40" Margin="0,-5,0,0" />
                            </mah:Tile>
                            <mah:Tile Title="Save Current Workspace" Width="Auto"
                                      mah:ControlsHelper.MouseOverBorderBrush="{DynamicResource MahApps.Brushes.ThemeForeground}">
                                <iconPacks:PackIconMaterial Kind="ContentSave" Width="40" Height="40" Margin="0,-5,0,0" />
                            </mah:Tile>
                            <mah:Tile Title="Import Workspace" Width="Auto"
                                      mah:ControlsHelper.MouseOverBorderBrush="{DynamicResource MahApps.Brushes.ThemeForeground}">
                                <iconPacks:PackIconMaterial Kind="ApplicationImport" Width="40" Height="40" Margin="0,-5,0,0" />
                            </mah:Tile>
                            <mah:Tile Title="Export Current Workspace"  Width="Auto"
                                      mah:ControlsHelper.MouseOverBorderBrush="{DynamicResource MahApps.Brushes.ThemeForeground}">
                                <iconPacks:PackIconMaterial Kind="ApplicationExport" Width="40" Height="40" Margin="0,-5,0,0" />
                            </mah:Tile>
                        </StackPanel>
                    </ScrollViewer>
                </mah:MetroTabItem>
                <mah:MetroTabItem ToolTip="Workflows">
                    <mah:MetroTabItem.Header>
                        <iconPacks:PackIconLucide Kind="FolderTree"
                                                  Width="36" Height="36" Padding="2"
                                                  Foreground="{Binding RelativeSource={RelativeSource AncestorType={x:Type mah:MetroTabItem}}, Path=Foreground}" />
                    </mah:MetroTabItem.Header>
                </mah:MetroTabItem>
                <mah:MetroTabItem ToolTip="Nodes">
                    <mah:MetroTabItem.Header>
                        <iconPacks:PackIconLucide Kind="Workflow"
                                                  Width="36" Height="36" Padding="2"
                                                  Foreground="{Binding RelativeSource={RelativeSource AncestorType={x:Type mah:MetroTabItem}}, Path=Foreground}" />
                    </mah:MetroTabItem.Header>
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <ItemsControl ItemsSource="{Binding GlobalNodeTypes, Source={x:Static viewModels:GlobalNodeManager.Instance}}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel>
                                        <TextBlock Text="TEST" />
                                        <mah:MetroHeader Header="{Binding}" />
                                        <Separator Height="1" Background="Gray" Margin="0,10,0,10" />
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                </mah:MetroTabItem>
                <mah:MetroTabItem ToolTip="Variables">
                    <mah:MetroTabItem.Header>
                        <iconPacks:PackIconLucide Kind="Variable"
                                                  Width="36" Height="36" Padding="2"
                                                  Foreground="{Binding RelativeSource={RelativeSource AncestorType={x:Type mah:MetroTabItem}}, Path=Foreground}" />
                    </mah:MetroTabItem.Header>
                    <!--<xctk:PropertyGrid SelectedObject="{Binding YourObject}"/>-->
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <ItemsControl ItemsSource="{Binding GlobalInputs, Source={x:Static viewModels:GlobalVariableManager.Instance}}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel>
                                        <mah:MetroHeader Header="{Binding EditorId}" />
                                        <TextBox Text="Name Placeholder" Margin="0,0,0,10"/>
                                        <reactiveui:ViewModelViewHost ViewModel="{Binding}" />
                                        <Separator Height="1" Background="Gray" Margin="0,10,0,10" />
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                </mah:MetroTabItem>
                <mah:MetroTabItem ToolTip="Actions">
                    <mah:MetroTabItem.Header>
                        <iconPacks:PackIconMaterial Kind="PlayBoxMultipleOutline"
                                                  Width="36" Height="36" Padding="2"
                                                  Foreground="{Binding RelativeSource={RelativeSource AncestorType={x:Type mah:MetroTabItem}}, Path=Foreground}" />
                    </mah:MetroTabItem.Header>

                </mah:MetroTabItem>

            </mah:MetroTabControl>

            <!-- Draggable splitter -->
            <GridSplitter Grid.Column="1"
                          Width="2"
                          HorizontalAlignment="Stretch"
                          VerticalAlignment="Stretch"
                          Background="{DynamicResource MahApps.Brushes.Accent}"/>
            
            <nodenetwork:NetworkView x:Name="networkView"
                                     Grid.Column="2"/>
        </Grid>
    </DockPanel>
</mah:MetroWindow>
